10 CLV:CLS:? "ARR/VAR TEST 1.00"
20 GSB @TA:GSB @TB:GSB @TC:GSB @TD:? "ALL OK":END
30 '
40 'Test A CLV
100 @TA:? "Test A";
110 A=123:Z=-123:[0]=111:[101]=222:[102]=333:[357]=444
120 CLV
130 IF A<>0 THEN E=1:GOTO @ER
140 IF Z<>0 THEN E=2:GOTO @ER
150 IF [0]<>0 THEN E=3:GOTO @ER
160 IF [101]<>0 THEN E=4:GOTO @ER
170 IF [102]<>0 THEN E=5:GOTO @ER
180 IF [357]<>0 THEN E=6:GOTO @ER
190 ? " OK":RTN
200 '
210 'Test B LET edges
300 @TB:? "Test B";
310 [102]=123:[103]=456:[104]=-1:[105]=-32768:[106]=32767
320 IF [102]<>123 THEN E=10:GOTO @ER
330 IF [103]<>456 THEN E=11:GOTO @ER
340 IF [104]<>-1 THEN E=12:GOTO @ER
350 IF [105]<>-32768 THEN E=13:GOTO @ER
360 IF [106]<>32767 THEN E=14:GOTO @ER
370 ? " OK":RTN
380 '
390 'Test C indirect R/W + boundary + A-Z
400 '[[P]] means: use [P] as index. Use P=[356] as pointer cell.
500 @TC:? "Test C";
510 CLV
520 A=1000:Z=-1000
530 [0]=111:[101]=222:[102]=333:[357]=444
540 FOR I=103 TO 355
550  [356]=I
560  V=I*17+9
570  [[356]]=V
580  IF [[356]]<>V THEN E=20:GOTO @ER
590 NEXT
600 '
610 IF [0]<>111 THEN E=21:GOTO @ER
620 IF [101]<>222 THEN E=22:GOTO @ER
630 IF [102]<>333 THEN E=23:GOTO @ER
640 IF [357]<>444 THEN E=24:GOTO @ER
650 IF A<>1000 THEN E=25:GOTO @ER
660 IF Z<>-1000 THEN E=26:GOTO @ER
670 FOR I=103 TO 355 STEP 29
680  IF [I]<>(I*17+9) THEN E=27:GOTO @ER
690 NEXT
700 ? " OK":RTN
710 '
720 'Test D FOR/NEXT (scalar + array, +STEP and -STEP)
800 @TD:? "Test D";
810 N=0:FOR I=0 TO 15:N=N+1:NEXT
820 IF N<>16 THEN E=30:GOTO @ER
830 N=0:FOR [102]=0 TO 15:N=N+1:NEXT
840 IF N<>16 THEN E=31:GOTO @ER
850 N=0:F=0
860 FOR [102]=15 TO 0 STEP -1
870  N=N+1
880  IF [102]=0 THEN F=1
890 NEXT
900 '
910 IF N<>16 THEN E=32:GOTO @ER
920 IF F=0 THEN E=33:GOTO @ER
930 ? " OK":RTN
1000 @ER:? "ERR";E:STOP

